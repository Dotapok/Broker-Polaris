node.name = "emqx-node1"
node.cookie = "EMQX_CLUSTER_COOKIE"
node.data_dir = "/opt/emqx/data/mnesia"

# Limite le nombre maximal de ports ouverts (réduit la mémoire)
node.max_ports = 10240

# Listeners
listener.tcp.default = 1883
listener.ssl.default = 8883
listener.ws.default = 8083
listener.wss.default = 8084

# Désactive anonymous (plus sûr)
allow_anonymous = false

# Logs uniquement les erreurs (réduit l’écriture)
log.console.level = error

# Plugins désactivés par défaut (charge uniquement ce dont tu as besoin)
plugins.loaded = []

# Pas de clustering pour l’instant
cluster.discovery = "manual"

# Pas de metrics/prometheus
plugins.emqx_prometheus = off

# Persistence minimale
mnesia.dir = "/opt/emqx/data/mnesia"
mnesia.dump_log_write_threshold = 10000
mnesia.dump_log_trigger_event_count = 10000
mnesia.dump_log_max_file_size = 512000

